"use strict";(self["webpackChunkwbs_2025"]=self["webpackChunkwbs_2025"]||[]).push([[145],{370:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});s(8111),s(1701);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-permissions-page"},[t("div",{staticClass:"page-header bg-white shadow-sm border-b border-gray-200 mb-6"},[t("div",{staticClass:"px-6 py-4"},[t("div",{staticClass:"flex items-center justify-between"},[e._m(0),t("button",{staticClass:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",on:{click:function(t){e.showCreateRoleModal=!0}}},[t("Icon",{staticClass:"mr-2 h-4 w-4",attrs:{icon:"mdi:plus"}}),e._v(" Buat Role Baru ")],1)])])]),t("div",{staticClass:"px-6 mb-6"},[t("div",{staticClass:"grid grid-cols-1 lg:grid-cols-2 gap-6"},[t("div",{staticClass:"bg-white rounded-lg shadow-sm border border-gray-200"},[e._m(1),t("div",{staticClass:"p-4 space-y-4"},e._l(e.roles,function(s){return t("div",{key:s.id,staticClass:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[t("div",{staticClass:"flex items-center justify-between mb-3"},[t("div",[t("h4",{staticClass:"text-sm font-medium text-gray-900"},[e._v(e._s(s.name))]),t("p",{staticClass:"text-xs text-gray-500"},[e._v(e._s(s.description))])]),t("div",{staticClass:"flex items-center space-x-2"},[t("span",{staticClass:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e._v(" "+e._s(s.userCount)+" users ")]),t("button",{staticClass:"text-blue-600 hover:text-blue-900",on:{click:function(t){return e.editRole(s)}}},[t("Icon",{staticClass:"h-4 w-4",attrs:{icon:"mdi:pencil"}})],1)])]),t("div",{staticClass:"space-y-2"},e._l(s.permissions,function(s){return t("div",{key:s,staticClass:"flex items-center"},[t("Icon",{staticClass:"h-4 w-4 text-green-500 mr-2",attrs:{icon:"mdi:check-circle"}}),t("span",{staticClass:"text-xs text-gray-700"},[e._v(e._s(e.getPermissionLabel(s)))])],1)}),0)])}),0)]),t("div",{staticClass:"bg-white rounded-lg shadow-sm border border-gray-200"},[e._m(2),t("div",{staticClass:"p-4"},[t("div",{staticClass:"mb-4"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2"},[e._v("Pilih User")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser,expression:"selectedUser"}],staticClass:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedUser=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:""}},[e._v("Pilih user...")]),e._l(e.users,function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ("+e._s(s.email)+") ")])})],2)]),e.selectedUser?t("div",{staticClass:"mb-4"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2"},[e._v("Role Saat Ini")]),t("div",{staticClass:"p-3 bg-gray-50 rounded-md"},[t("span",{staticClass:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},[e._v(" "+e._s(e.getCurrentUserRole(e.selectedUser))+" ")])])]):e._e(),t("div",{staticClass:"mb-4"},[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2"},[e._v("Role Baru")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRole,expression:"selectedRole"}],staticClass:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRole=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:""}},[e._v("Pilih role...")]),e._l(e.roles,function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})],2)]),t("button",{staticClass:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!e.selectedUser||!e.selectedRole},on:{click:e.assignRole}},[t("Icon",{staticClass:"mr-2 h-4 w-4",attrs:{icon:"mdi:account-key"}}),e._v(" Assign Role ")],1)])])])]),t("div",{staticClass:"px-6"},[t("div",{staticClass:"bg-white rounded-lg shadow-sm border border-gray-200"},[e._m(3),t("div",{staticClass:"overflow-x-auto"},[t("table",{staticClass:"min-w-full divide-y divide-gray-200"},[t("thead",{staticClass:"bg-gray-50"},[t("tr",[t("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e._v("Izin")]),e._l(e.roles,function(s){return t("th",{key:s.id,staticClass:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},[e._v(" "+e._s(s.name)+" ")])})],2)]),t("tbody",{staticClass:"bg-white divide-y divide-gray-200"},e._l(e.allPermissions,function(s){return t("tr",{key:s,staticClass:"hover:bg-gray-50"},[t("td",{staticClass:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},[e._v(" "+e._s(e.getPermissionLabel(s))+" ")]),e._l(e.roles,function(e){return t("td",{key:e.id,staticClass:"px-6 py-4 whitespace-nowrap text-center"},[t("Icon",{staticClass:"h-5 w-5 mx-auto",class:e.permissions.includes(s)?"text-green-500":"text-red-500",attrs:{icon:e.permissions.includes(s)?"mdi:check-circle":"mdi:close-circle"}})],1)})],2)}),0)])])])]),e.showCreateRoleModal?t("div",{staticClass:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},[t("div",{staticClass:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"},[t("div",{staticClass:"mt-3"},[t("div",{staticClass:"flex items-center justify-between mb-4"},[t("h3",{staticClass:"text-lg font-medium text-gray-900"},[e._v("Buat Role Baru")]),t("button",{staticClass:"text-gray-400 hover:text-gray-600",on:{click:function(t){e.showCreateRoleModal=!1}}},[t("Icon",{staticClass:"h-5 w-5",attrs:{icon:"mdi:close"}})],1)]),t("form",{staticClass:"space-y-4",on:{submit:function(t){return t.preventDefault(),e.createRole.apply(null,arguments)}}},[t("div",[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-1"},[e._v("Nama Role")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newRole.name,expression:"newRole.name"}],staticClass:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",attrs:{type:"text",required:"",placeholder:"Masukkan nama role"},domProps:{value:e.newRole.name},on:{input:function(t){t.target.composing||e.$set(e.newRole,"name",t.target.value)}}})]),t("div",[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-1"},[e._v("Deskripsi")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newRole.description,expression:"newRole.description"}],staticClass:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",attrs:{required:"",rows:"3",placeholder:"Deskripsi role"},domProps:{value:e.newRole.description},on:{input:function(t){t.target.composing||e.$set(e.newRole,"description",t.target.value)}}})]),t("div",[t("label",{staticClass:"block text-sm font-medium text-gray-700 mb-2"},[e._v("Izin")]),t("div",{staticClass:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md p-3"},e._l(e.allPermissions,function(s){return t("div",{key:s,staticClass:"flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newRole.permissions,expression:"newRole.permissions"}],staticClass:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",attrs:{id:s,type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.newRole.permissions)?e._i(e.newRole.permissions,s)>-1:e.newRole.permissions},on:{change:function(t){var r=e.newRole.permissions,i=t.target,a=!!i.checked;if(Array.isArray(r)){var o=s,l=e._i(r,o);i.checked?l<0&&e.$set(e.newRole,"permissions",r.concat([o])):l>-1&&e.$set(e.newRole,"permissions",r.slice(0,l).concat(r.slice(l+1)))}else e.$set(e.newRole,"permissions",a)}}}),t("label",{staticClass:"ml-2 text-sm text-gray-700",attrs:{for:s}},[e._v(" "+e._s(e.getPermissionLabel(s))+" ")])])}),0)]),t("div",{staticClass:"flex justify-end space-x-3 pt-4"},[t("button",{staticClass:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",attrs:{type:"button"},on:{click:function(t){e.showCreateRoleModal=!1}}},[e._v(" Batal ")]),t("button",{staticClass:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",attrs:{type:"submit"}},[e._v(" Buat Role ")])])])])])]):e._e()])},i=[function(){var e=this,t=e._self._c;return t("div",[t("h1",{staticClass:"text-2xl font-bold text-gray-900"},[e._v("Izin User")]),t("p",{staticClass:"mt-1 text-sm text-gray-600"},[e._v("Kelola hak akses dan izin pengguna")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"px-4 py-3 border-b border-gray-200 bg-gray-50"},[t("h3",{staticClass:"text-lg font-medium text-gray-900"},[e._v("Role & Izin")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"px-4 py-3 border-b border-gray-200 bg-gray-50"},[t("h3",{staticClass:"text-lg font-medium text-gray-900"},[e._v("Assign Role ke User")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"px-4 py-3 border-b border-gray-200 bg-gray-50"},[t("h3",{staticClass:"text-lg font-medium text-gray-900"},[e._v("Matrix Izin")]),t("p",{staticClass:"text-sm text-gray-500"},[e._v("Overview izin untuk setiap role")])])}],a=(s(4114),s(116),s(8298)),o={name:"UserPermissions",components:{Icon:a.In},data(){return{showCreateRoleModal:!1,selectedUser:"",selectedRole:"",newRole:{name:"",description:"",permissions:[]},roles:[{id:"reporter",name:"Reporter",description:"User yang dapat membuat dan mengelola laporan mereka sendiri",userCount:15,permissions:["create_report","view_own_reports","edit_own_reports","view_profile","edit_profile"]},{id:"admin",name:"Admin",description:"Administrator yang dapat mengelola user dan laporan",userCount:3,permissions:["view_all_reports","edit_all_reports","manage_users","view_analytics","manage_permissions","view_profile","edit_profile"]}],users:[{id:1,name:"Ahmad Pratama",email:"ahmad@example.com",role:"reporter"},{id:2,name:"Siti Nurhaliza",email:"siti@example.com",role:"admin"},{id:3,name:"Budi Santoso",email:"budi@example.com",role:"reporter"}],allPermissions:["create_report","view_own_reports","edit_own_reports","view_all_reports","edit_all_reports","delete_reports","manage_users","manage_permissions","view_analytics","view_profile","edit_profile","system_settings"]}},methods:{getPermissionLabel(e){const t={create_report:"Buat Laporan",view_own_reports:"Lihat Laporan Sendiri",edit_own_reports:"Edit Laporan Sendiri",view_all_reports:"Lihat Semua Laporan",edit_all_reports:"Edit Semua Laporan",delete_reports:"Hapus Laporan",manage_users:"Kelola User",manage_permissions:"Kelola Izin",view_analytics:"Lihat Statistik",view_profile:"Lihat Profil",edit_profile:"Edit Profil",system_settings:"Pengaturan Sistem"};return t[e]||e},getCurrentUserRole(e){const t=this.users.find(t=>t.id===parseInt(e)),s=this.roles.find(e=>e.id===t?.role);return s?.name||"Tidak ada role"},editRole(e){this.$message.info(`Edit role: ${e.name}`)},assignRole(){if(!this.selectedUser||!this.selectedRole)return;const e=this.users.find(e=>e.id===parseInt(this.selectedUser)),t=this.roles.find(e=>e.id===this.selectedRole);if(e&&t){const s=this.roles.find(t=>t.id===e.role);s&&s.userCount--,e.role=this.selectedRole,t.userCount++,this.$message.success(`Role ${t.name} berhasil di-assign ke ${e.name}`),this.selectedUser="",this.selectedRole=""}},createRole(){const e={id:this.newRole.name.toLowerCase().replace(/\s+/g,"_"),...this.newRole,userCount:0};this.roles.push(e),this.showCreateRoleModal=!1,this.newRole={name:"",description:"",permissions:[]},this.$message.success("Role baru berhasil dibuat")}}},l=o,n=s(1656),d=(0,n.A)(l,r,i,!1,null,"0722cf06",null),c=d.exports}}]);
//# sourceMappingURL=user-permissions.3acb8503.js.map