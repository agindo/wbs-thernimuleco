"use strict";(self["webpackChunkwbs_2025"]=self["webpackChunkwbs_2025"]||[]).push([[298],{6049:function(i,e,t){t.r(e),t.d(e,{default:function(){return u}});var a=function(){var i=this,e=i._self._c;return e("div",{staticClass:"verification-page"},[i._m(0),e("div",{staticClass:"verification-container"},[e("div",{staticClass:"verification-card"},[e("div",{staticClass:"verification-header"},[e("div",{staticClass:"logo-container"},[e("Icon",{staticClass:"logo-icon",attrs:{icon:"mdi:email-check"}})],1),e("h1",{staticClass:"verification-title"},[i._v("Verifikasi Email")]),e("p",{staticClass:"verification-subtitle"},[i._v(" Masukkan kode verifikasi yang telah dikirim ke"),e("br"),e("strong",[i._v(i._s(i.userEmail))])])]),e("el-form",{ref:"verificationForm",staticClass:"verification-form",attrs:{model:i.verificationForm,rules:i.verificationRules},nativeOn:{submit:function(e){return e.preventDefault(),i.handleVerification.apply(null,arguments)}}},[e("el-form-item",{staticClass:"form-item",attrs:{prop:"code"}},[e("div",{staticClass:"code-input-container"},[e("el-input",{staticClass:"form-input code-input",attrs:{placeholder:"Masukkan 6 karakter kode verifikasi (huruf & angka)","prefix-icon":"el-icon-key",size:"large",maxlength:"6"},on:{input:i.formatCode},model:{value:i.verificationForm.code,callback:function(e){i.$set(i.verificationForm,"code",e)},expression:"verificationForm.code"}})],1)]),e("el-form-item",{staticClass:"submit-item"},[e("el-button",{staticClass:"verify-button",attrs:{type:"primary",size:"large",loading:i.loading,"native-type":"submit"}},[e("div",{staticClass:"button-content"},[i.loading?i._e():e("Icon",{staticClass:"button-icon",attrs:{icon:"mdi:shield-check"}}),e("span",[i._v(i._s(i.loading?"Memverifikasi...":"Verifikasi Kode"))])],1)])],1)],1),e("div",{staticClass:"resend-section"},[e("p",{staticClass:"resend-text"},[i._v(" Tidak menerima kode? "),e("el-link",{staticClass:"resend-link",attrs:{type:"primary",disabled:i.resendDisabled},on:{click:i.resendCode}},[i._v(" "+i._s(i.resendDisabled?`Kirim ulang dalam ${i.countdown}s`:"Kirim ulang")+" ")])],1)]),e("div",{staticClass:"verification-footer"},[e("p",{staticClass:"back-text"},[e("el-link",{staticClass:"back-link",attrs:{type:"info"},on:{click:i.goBack}},[e("Icon",{staticClass:"back-icon",attrs:{icon:"mdi:arrow-left"}}),i._v(" Kembali ke registrasi ")],1)],1)])],1),e("div",{staticClass:"security-info"},[e("div",{staticClass:"security-item"},[e("Icon",{staticClass:"security-icon",attrs:{icon:"mdi:timer-sand"}}),i._m(1)],1),e("div",{staticClass:"security-item"},[e("Icon",{staticClass:"security-icon",attrs:{icon:"mdi:email-lock"}}),i._m(2)],1)])])])},s=[function(){var i=this,e=i._self._c;return e("div",{staticClass:"verification-background"},[e("div",{staticClass:"bg-gradient"}),e("div",{staticClass:"bg-pattern"})])},function(){var i=this,e=i._self._c;return e("div",{staticClass:"security-content"},[e("h4",[i._v("Kode Berlaku 10 Menit")]),e("p",[i._v("Kode verifikasi akan kedaluwarsa dalam 10 menit")])])},function(){var i=this,e=i._self._c;return e("div",{staticClass:"security-content"},[e("h4",[i._v("Periksa Spam/Junk")]),e("p",[i._v("Jika tidak ada di inbox, cek folder spam email Anda")])])}],r=(t(4114),t(8298)),n=t(1910),o={name:"VerificationView",components:{Icon:r.In},computed:{...(0,n.aH)(["loading","message","status"])},watch:{message(i){i&&(this.$message.error(i),this.$store.commit("set_message",null))}},data(){return{resendDisabled:!1,countdown:60,countdownTimer:null,userEmail:"",pendingData:null,verificationForm:{code:""},verificationRules:{code:[{required:!0,message:"Kode verifikasi wajib diisi",trigger:"blur"},{len:6,message:"Kode verifikasi harus 6 karakter",trigger:"blur"},{pattern:/^[A-Za-z0-9]{6}$/,message:"Kode harus berupa 6 karakter huruf dan angka",trigger:"blur"}]}}},mounted(){this.initializeVerification()},beforeDestroy(){this.countdownTimer&&clearInterval(this.countdownTimer)},methods:{...(0,n.i0)(["verify_email"]),initializeVerification(){const i=localStorage.getItem("pending_verification");i?(this.pendingData=JSON.parse(i),this.userEmail=this.pendingData.email):(this.$message.warning("Tidak ada data verifikasi. Silakan daftar terlebih dahulu."),this.$router.push("/register"))},formatCode(i){const e=i.replace(/[^A-Za-z0-9]/g,"").slice(0,6).toUpperCase();this.verificationForm.code=e},async handleVerification(){this.$refs.verificationForm.validate(async i=>{if(i)try{const i={email:this.userEmail,code:this.verificationForm.code},e=await this.verify_email(i);e.data&&(e.data.user&&localStorage.setItem("user_data",JSON.stringify(e.data.user)),localStorage.removeItem("pending_verification"),this.$message.success("Verifikasi berhasil! Akun Anda telah aktif."),setTimeout(()=>{this.$router.push("/login")},2e3))}catch(e){console.error("Verification error:",e)}else this.$message.error("Silakan periksa kode verifikasi Anda")})},async resendCode(){if(!this.resendDisabled)try{const i=await this.$http.post("http://localhost:8080/api/auth/resend-verification",{email:this.userEmail});i.data&&(this.$message.success("Kode verifikasi baru telah dikirim ke email Anda"),this.startCountdown())}catch(i){console.error("Resend code error:",i),this.$message.error("Gagal mengirim ulang kode. Silakan coba lagi nanti")}},startCountdown(){this.resendDisabled=!0,this.countdown=60,this.countdownTimer=setInterval(()=>{this.countdown--,this.countdown<=0&&(this.resendDisabled=!1,clearInterval(this.countdownTimer))},1e3)},goBack(){localStorage.removeItem("pending_verification"),this.$router.push("/register")},async testVerification(){const i="ABC123";this.verificationForm.code=i;try{const e={email:this.userEmail,code:i},t=await this.verify_email(e);t.data&&(this.$message.success("Test verifikasi berhasil!"),console.log("Test verification successful:",t.data))}catch(e){console.error("Test verification error:",e)}}}},c=o,l=t(1656),d=(0,l.A)(c,a,s,!1,null,"2fd254b2",null),u=d.exports}}]);
//# sourceMappingURL=verification.5e89230c.js.map