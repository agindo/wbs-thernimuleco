"use strict";(self["webpackChunkwbs_2025"]=self["webpackChunkwbs_2025"]||[]).push([[71],{2399:function(t,e,a){a.d(e,{A:function(){return o}});var s=a(417);const r=s.A.create({baseURL:"https://wbsreborn.lan.go.id/sylow/api",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(t=>{const e=localStorage.getItem("token")||sessionStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t)),r.interceptors.response.use(t=>t,t=>(401===t.response?.status&&(localStorage.removeItem("token"),sessionStorage.removeItem("token")),Promise.reject(t)));var i=r;class n{async updateReport(t,e){try{const a=await i.put(`/reports/${t}`,e);if(a.data.success)return{success:!0,report:a.data.data,message:a.data.message||"Report updated successfully"};throw new Error(a.data.message||"Failed to update report")}catch(a){throw this.handleError(a)}}async getMyReports(t=0,e=10){try{const a=await i.get("/reports/my",{params:{page:t,size:e}});if(a.data.success)return{content:a.data.data.content,pagination:{page:a.data.data.page,size:a.data.data.size,totalElements:a.data.data.totalElements,totalPages:a.data.data.totalPages,first:a.data.data.first,last:a.data.data.last,empty:a.data.data.empty},message:a.data.message};throw new Error(a.data.message||"Failed to fetch reports")}catch(a){throw this.handleError(a)}}async getAllReports(t=0,e=10,a="createdAt",s="desc"){try{const r=await i.get("/reports",{params:{page:t,size:e,sortBy:a,sortDir:s}});if(r.data.success)return{content:r.data.data.content,pagination:{page:r.data.data.page,size:r.data.data.size,totalElements:r.data.data.totalElements,totalPages:r.data.data.totalPages,first:r.data.data.first,last:r.data.data.last,empty:r.data.data.empty},message:r.data.message};throw new Error(r.data.message||"Failed to fetch all reports")}catch(r){throw this.handleError(r)}}async getReport(t){try{const e=await i.get(`/reports/${t}`);if(e.data.success)return{report:e.data.data,message:e.data.message};throw new Error(e.data.message||"Failed to fetch report")}catch(e){throw this.handleError(e)}}async createReport(t){try{const e=await i.post("/reports",t);if(e.data.success)return{success:!0,report:e.data.data,message:e.data.message||"Report created successfully"};throw new Error(e.data.message||"Failed to create report")}catch(e){throw this.handleError(e)}}async updateReport(t,e){try{const a=await i.put(`/reports/${t}`,e);return a.data}catch(a){throw this.handleError(a)}}async deleteReport(t){try{const e=await i.delete(`/reports/${t}`);if(e.data.success)return{success:!0,message:e.data.message||"Report deleted successfully"};throw new Error(e.data.message||"Failed to delete report")}catch(e){throw this.handleError(e)}}async uploadAttachment(t,e){try{const a=new FormData;a.append("attachment",e);const s=await i.post(`/reports/${t}/attachment`,a,{headers:{"Content-Type":"multipart/form-data"}});return s.data}catch(a){throw this.handleError(a)}}async addEvidence(t,e){try{const a=await i.post(`/reports/${t}/evidence`,e);return a.data}catch(a){throw this.handleError(a)}}async getReportsStatistics(){try{const t=await i.get("/reports/statistics");return t.data}catch(t){throw this.handleError(t)}}async searchReports(t,e={}){try{const a={q:t,...e},s=await i.get("/reports/search",{params:a});return s.data}catch(a){throw this.handleError(a)}}async updateReportStatus(t,e,a="Tidak ada"){try{const s=await i.patch(`/reports/${t}/status`,{status:e,reason:a});return s.data}catch(s){throw this.handleError(s)}}handleError(t){if(t.response){const e=t.response.data?.message||`Server error: ${t.response.status}`;return new Error(e)}return t.request?new Error("Tidak dapat terhubung ke server. Pastikan server berjalan di http://localhost:8080"):new Error(`Error: ${t.message}`)}}var o=new n},9594:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-home"},[e("div",{staticClass:"welcome-section mb-8"},[e("div",{staticClass:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",[e("h1",{staticClass:"text-2xl font-bold text-gray-900 mb-2"},[t._v(" Selamat datang, "+t._s(t.pengguna.firstName+" "+t.pengguna.lastName)+"! ðŸ‘‹ ")]),e("p",{staticClass:"text-gray-600"},[t._v(" Ini adalah dashboard Anda untuk mengelola sistem WBS. ")])]),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center"},[e("Icon",{staticClass:"text-3xl text-white",attrs:{icon:t.getRoleIcon(t.currentUser.role)}})],1)])])])]),e("div",{staticClass:"stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},t._l(t.filteredStats,function(a){return e("div",{key:a.id,staticClass:"stat-card bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",[e("p",{staticClass:"text-sm font-medium text-gray-600 mb-1"},[t._v(t._s(a.label))]),e("p",{staticClass:"text-3xl font-bold text-gray-900"},[t._v(t._s(a.value))])]),e("div",{class:["w-12 h-12 rounded-lg flex items-center justify-center",a.iconBg]},[e("Icon",{staticClass:"text-xl text-white",attrs:{icon:a.icon}})],1)])])}),0),e("div",{staticClass:"recent-activity"},[e("div",{staticClass:"bg-white rounded-xl shadow-sm border border-gray-200"},[e("div",{staticClass:"p-6 border-b border-gray-200"},[e("div",{staticClass:"flex items-center justify-between"},[e("h2",{staticClass:"text-lg font-semibold text-gray-900"},[t._v("Aktivitas Terbaru")]),e("router-link",{staticClass:"text-blue-600 hover:text-blue-700 text-sm font-medium",attrs:{to:"/dashboard/notifications"}},[t._v(" Lihat Semua ")])],1)]),e("div",{staticClass:"p-6"},[e("div",{staticClass:"space-y-4"},t._l(t.recentActivities,function(a){return e("div",{key:a.id,staticClass:"flex items-center space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",{class:["w-10 h-10 rounded-full flex items-center justify-center",a.iconBg]},[e("Icon",{staticClass:"text-lg text-white",attrs:{icon:a.icon}})],1),e("div",{staticClass:"flex-1"},[e("p",{staticClass:"text-sm font-medium text-gray-900"},[t._v(t._s(a.title))]),e("p",{staticClass:"text-sm text-gray-600"},[t._v(t._s(a.description))]),e("p",{staticClass:"text-xs text-gray-500 mt-1"},[t._v(t._s(a.time))])]),a.status?e("div",{class:["px-2 py-1 rounded-full text-xs font-medium",t.getStatusClass(a.status)]},[t._v(" "+t._s(a.status)+" ")]):t._e()])}),0),0===t.recentActivities.length?e("div",{staticClass:"text-center py-8"},[e("Icon",{staticClass:"text-4xl text-gray-400 mb-2",attrs:{icon:"mdi:inbox"}}),e("p",{staticClass:"text-gray-600"},[t._v("Belum ada aktivitas terbaru")])],1):t._e()])])])])},r=[],i=(a(4114),a(8111),a(2489),a(8298)),n=a(2399),o={name:"DashboardHome",props:{pengguna:{type:Object,required:!0}},components:{Icon:i.In},data(){return{statistics:{totalActiveReports:0},statisticsLoading:!1,currentUser:{name:"John Doe",role:"admin"},quickActions:[{id:"create-report",label:"Buat Laporan Baru",description:"Laporkan dugaan pelanggaran",icon:"mdi:file-document-plus",iconBg:"bg-blue-500",action:"navigate",target:"/dashboard/create-report",roles:["reporter"]},{id:"review-reports",label:"Review Laporan",description:"Tinjau laporan yang masuk",icon:"mdi:clipboard-check",iconBg:"bg-green-500",action:"navigate",target:"/dashboard/pending-reports",roles:["admin","super_admin"]},{id:"view-analytics",label:"Lihat Statistik",description:"Analisis data laporan",icon:"mdi:chart-line",iconBg:"bg-purple-500",action:"navigate",target:"/dashboard/analytics",roles:["admin","super_admin"]},{id:"manage-users",label:"Kelola Pengguna",description:"Tambah atau edit pengguna",icon:"mdi:account-cog",iconBg:"bg-orange-500",action:"navigate",target:"/dashboard/users",roles:["super_admin"]}],recentActivities:[{id:1,title:"Laporan baru diterima",description:"Laporan dugaan korupsi dari pengguna anonymous",time:"2 jam yang lalu",icon:"mdi:file-document-plus",iconBg:"bg-blue-500",status:"Baru"},{id:2,title:"Laporan telah direview",description:"Laporan #WBS-2024-001 telah selesai ditinjau",time:"5 jam yang lalu",icon:"mdi:check-circle",iconBg:"bg-green-500",status:"Selesai"},{id:3,title:"Pengguna baru terdaftar",description:"Admin baru telah bergabung dengan sistem",time:"1 hari yang lalu",icon:"mdi:account-plus",iconBg:"bg-purple-500",status:"Aktif"}]}},computed:{stats(){return[{id:"my-reports",label:"Laporan Saya",value:"5",change:"+2",trend:"up",icon:"mdi:file-document",iconBg:"bg-blue-500",roles:["reporter"]},{id:"total-reports",label:"Total Laporan",value:this.statisticsLoading?"...":this.statistics.totalActiveReports.toString(),change:"+12",trend:"up",icon:"mdi:file-document-multiple",iconBg:"bg-green-500",roles:["admin","super_admin"]},{id:"pending-reports",label:"Menunggu Review",value:"8",change:"-3",trend:"down",icon:"mdi:clock-outline",iconBg:"bg-yellow-500",roles:["admin","super_admin"]},{id:"resolved-reports",label:"Laporan Selesai",value:"92",change:"+15",trend:"up",icon:"mdi:check-circle",iconBg:"bg-blue-500",roles:["admin","super_admin"]},{id:"total-users",label:"Total Pengguna",value:"1,284",change:"+24",trend:"up",icon:"mdi:account-group",iconBg:"bg-purple-500",roles:["super_admin"]}]},filteredStats(){return this.stats.filter(t=>t.roles.includes(this.currentUser.role))},filteredQuickActions(){return this.quickActions.filter(t=>t.roles.includes(this.currentUser.role))}},methods:{getRoleLabel(t){const e={reporter:"Pelapor",admin:"Administrator",super_admin:"Super Administrator"};return e[t]||"Pengguna"},getRoleIcon(t){const e={reporter:"mdi:account",admin:"mdi:shield-account",super_admin:"mdi:crown"};return e[t]||"mdi:account"},getStatusClass(t){const e={Baru:"bg-blue-100 text-blue-700",Selesai:"bg-green-100 text-green-700",Aktif:"bg-purple-100 text-purple-700",Pending:"bg-yellow-100 text-yellow-700"};return e[t]||"bg-gray-100 text-gray-700"},handleQuickAction(t){"navigate"===t.action&&this.$router.push(t.target)},async fetchStatistics(){this.statisticsLoading=!0;try{const t=await n.A.getReportsStatistics();t.success&&(this.statistics=t.data)}catch(t){console.error("Error fetching statistics:",t)}finally{this.statisticsLoading=!1}}},mounted(){this.fetchStatistics()}},c=o,d=a(1656),l=(0,d.A)(c,s,r,!1,null,"19014a1e",null),u=l.exports}}]);
//# sourceMappingURL=dashboard-home.c6a5669f.js.map