"use strict";(self["webpackChunkwbs_2025"]=self["webpackChunkwbs_2025"]||[]).push([[945],{955:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-container"},[t("aside",{class:["sidebar fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out",e.sidebarOpen?"translate-x-0":"-translate-x-full","lg:translate-x-0 lg:static lg:inset-0"]},[t("div",{staticClass:"sidebar-content h-full flex flex-col bg-white border-r border-gray-200 shadow-lg"},[t("div",{staticClass:"sidebar-header px-6 py-6 border-b border-gray-200"},[t("div",{staticClass:"flex items-center justify-between"},[t("div",{staticClass:"flex items-center space-x-3"},[t("div",{staticClass:"flex-shrink-0"},[t("div",{staticClass:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[t("Icon",{staticClass:"h-6 w-6 text-white",attrs:{icon:"mdi:shield-check"}})],1)]),e._m(0)]),t("button",{staticClass:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",on:{click:e.closeSidebar}},[t("Icon",{staticClass:"h-5 w-5",attrs:{icon:"mdi:close"}})],1)])]),t("div",{staticClass:"user-profile px-6 py-4 border-b border-gray-200"},[t("div",{staticClass:"flex items-center space-x-3"},[t("div",{staticClass:"flex-shrink-0"},[t("div",{staticClass:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center"},[t("span",{staticClass:"text-white font-semibold text-lg"},[e._v(e._s(e.userInitials))])])]),t("div",{staticClass:"flex-1 min-w-0"},[t("p",{staticClass:"text-sm font-medium text-gray-900 truncate"},[e._v(e._s(e.currentUser.name))]),t("p",{staticClass:"text-xs text-gray-500 truncate"},[e._v(e._s(e.maskEmail(e.currentUser.email)))])])])]),t("nav",{staticClass:"sidebar-nav flex-1 px-4 py-4 space-y-1 overflow-y-auto min-h-0"},e._l(e.filteredMenuItems,function(s){return t("div",{key:s.id,staticClass:"nav-group"},[s.children?t("div",{staticClass:"menu-group"},[t("button",{class:["nav-group-header w-full group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200",e.expandedGroups.includes(s.id)||e.hasActiveChild(s)?"bg-gray-50 text-gray-900":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"],on:{click:function(t){return e.toggleMenuGroup(s.id)}}},[t("Icon",{class:["mr-3 h-5 w-5 transition-colors duration-200",e.expandedGroups.includes(s.id)||e.hasActiveChild(s)?"text-gray-500":"text-gray-400 group-hover:text-gray-500"],attrs:{icon:s.icon}}),t("span",{staticClass:"flex-1 text-left"},[e._v(e._s(s.label))]),t("Icon",{class:["h-4 w-4 transition-transform duration-200",e.expandedGroups.includes(s.id)?"rotate-180":""],attrs:{icon:"mdi:chevron-down"}})],1),t("transition",{attrs:{name:"submenu","enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-40","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 max-h-40","leave-to-class":"opacity-0 max-h-0"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.expandedGroups.includes(s.id),expression:"expandedGroups.includes(item.id)"}],staticClass:"submenu mt-1 space-y-1 overflow-hidden"},e._l(s.children,function(s){return t("router-link",{key:s.id,class:["nav-subitem group flex items-center pl-11 pr-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200",e.isActiveRoute(s.to)?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"],attrs:{to:s.to}},[t("Icon",{class:["mr-3 h-4 w-4 transition-colors duration-200",e.isActiveRoute(s.to)?"text-blue-700":"text-gray-400 group-hover:text-gray-500"],attrs:{icon:s.icon}}),t("span",{staticClass:"flex-1"},[e._v(e._s(s.label))]),s.badge?t("span",{class:["inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none rounded-full",s.badgeClass||"bg-red-100 text-red-600"]},[e._v(" "+e._s(s.badge)+" ")]):e._e()],1)}),1)])],1):t("router-link",{class:["group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200",e.isActiveRoute(s.to)?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"],attrs:{to:s.to}},[t("Icon",{class:["mr-3 h-5 w-5 transition-colors duration-200",e.isActiveRoute(s.to)?"text-blue-700":"text-gray-400 group-hover:text-gray-500"],attrs:{icon:s.icon}}),t("span",{staticClass:"flex-1"},[e._v(e._s(s.label))]),s.badge?t("span",{class:["inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none rounded-full",s.badgeClass||"bg-red-100 text-red-600"]},[e._v(" "+e._s(s.badge)+" ")]):e._e()],1)],1)}),0),t("div",{staticClass:"sidebar-footer mt-auto px-4 py-4 border-t border-gray-200 space-y-2 flex-shrink-0"},[t("button",{staticClass:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-50 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors duration-200",on:{click:e.goToHome}},[t("Icon",{staticClass:"mr-2 h-4 w-4",attrs:{icon:"mdi:home"}}),e._v(" Kembali ke Home ")],1),t("button",{staticClass:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 transition-colors duration-200",on:{click:e.logout}},[t("Icon",{staticClass:"mr-2 h-4 w-4",attrs:{icon:"mdi:logout"}}),e._v(" Keluar ")],1)])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.sidebarOpen,expression:"sidebarOpen"}],staticClass:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",on:{click:e.closeSidebar}}),t("main",{class:["main-content flex-1 flex flex-col min-h-screen transition-all duration-300"]},[t("header",{staticClass:"main-header bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30"},[t("div",{staticClass:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8"},[t("div",{staticClass:"flex items-center"},[t("button",{staticClass:"lg:hidden mr-3 p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",on:{click:e.toggleSidebar}},[t("Icon",{staticClass:"h-5 w-5",attrs:{icon:"mdi:menu"}})],1),t("nav",{staticClass:"breadcrumb hidden sm:flex",attrs:{"aria-label":"Breadcrumb"}},[t("ol",{staticClass:"flex items-center space-x-2 text-sm"},[t("li",[t("div",{staticClass:"flex items-center"},[t("Icon",{staticClass:"h-4 w-4 text-gray-400",attrs:{icon:"mdi:home"}}),t("span",{staticClass:"ml-1 text-gray-500"},[e._v("Dashboard")])],1)]),"Dashboard"!==e.currentPage?t("li",[t("div",{staticClass:"flex items-center"},[t("Icon",{staticClass:"h-4 w-4 text-gray-400 mx-1",attrs:{icon:"mdi:chevron-right"}}),t("span",{staticClass:"text-gray-900 font-medium"},[e._v(e._s(e.currentPage))])],1)]):e._e()])])]),t("div",{staticClass:"flex items-center space-x-4"},[t("div",{staticClass:"relative"},[t("button",{staticClass:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors duration-200",on:{click:e.toggleNotifications}},[t("Icon",{staticClass:"h-5 w-5",attrs:{icon:"mdi:bell"}}),e.unreadNotifications>0?t("span",{staticClass:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center"},[e._v(" "+e._s(e.unreadNotifications)+" ")]):e._e()],1),t("transition",{attrs:{name:"dropdown"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.notificationsOpen,expression:"notificationsOpen"}],staticClass:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},[t("div",{staticClass:"px-4 py-2 border-b border-gray-200"},[t("h3",{staticClass:"text-sm font-semibold text-gray-900"},[e._v("Notifikasi")])]),t("div",{staticClass:"max-h-64 overflow-y-auto"},e._l(e.notifications,function(s){return t("div",{key:s.id,staticClass:"px-4 py-3 hover:bg-gray-50"},[t("p",{staticClass:"text-sm text-gray-900"},[e._v(e._s(s.message))]),t("p",{staticClass:"text-xs text-gray-500 mt-1"},[e._v(e._s(s.time))])])}),0)])])],1),t("div",{staticClass:"relative"},[t("button",{staticClass:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",on:{click:e.toggleUserMenu}},[t("div",{staticClass:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},[t("span",{staticClass:"text-white font-semibold text-sm"},[e._v(e._s(e.userInitials))])]),t("Icon",{staticClass:"h-4 w-4 text-gray-500",attrs:{icon:"mdi:chevron-down"}})],1),t("transition",{attrs:{name:"dropdown"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.userMenuOpen,expression:"userMenuOpen"}],staticClass:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},[t("div",{staticClass:"px-4 py-2 border-b border-gray-200"},[t("p",{staticClass:"text-sm font-semibold text-gray-900"},[e._v(e._s(e.currentUser.name))]),t("p",{staticClass:"text-xs text-gray-500"},[e._v(e._s(e.maskEmail(e.currentUser.email)))])]),t("button",{staticClass:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",on:{click:e.navigateToProfile}},[t("Icon",{staticClass:"mr-3 h-4 w-4",attrs:{icon:"mdi:account"}}),e._v(" Profil ")],1),t("button",{staticClass:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",on:{click:e.navigateToSettings}},[t("Icon",{staticClass:"mr-3 h-4 w-4",attrs:{icon:"mdi:cog"}}),e._v(" Pengaturan ")],1),t("div",{staticClass:"border-t border-gray-200 mt-2"},[t("button",{staticClass:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50",on:{click:e.logout}},[t("Icon",{staticClass:"mr-3 h-4 w-4",attrs:{icon:"mdi:logout"}}),e._v(" Keluar ")],1)])])])],1)])])]),t("div",{staticClass:"page-content flex-1 p-4 sm:p-6 lg:p-8 bg-gray-50"},[t("router-view",{attrs:{pengguna:e.currentUser}})],1)])])},r=[function(){var e=this,t=e._self._c;return t("div",[t("h1",{staticClass:"text-xl font-bold text-gray-900"},[e._v("Dashboard")]),t("p",{staticClass:"text-sm text-gray-500"},[e._v("Whistle Blowing System")])])}],i=(s(4114),s(8111),s(2489),s(116),s(1701),s(3579),s(8298)),o=s(1910),n={name:"DashboardView",components:{Icon:i.In},data(){return{sidebarOpen:!1,userMenuOpen:!1,notificationsOpen:!1,expandedGroups:["reports"],unreadNotifications:3,notifications:[{id:1,message:"Laporan baru telah diterima",time:"2 jam yang lalu"},{id:2,message:"Status laporan telah diperbarui",time:"4 jam yang lalu"},{id:3,message:"Reminder: Review laporan pending",time:"1 hari yang lalu"}],menuItems:[{id:"dashboard",label:"Dashboard",icon:"mdi:view-dashboard",to:"/dashboard",roles:["user","admin"]},{id:"my-reports",label:"Laporan",icon:"mdi:file-document",to:"/dashboard/my-reports",roles:["user"]},{id:"evidence",label:"Evidence",icon:"mdi:file-image",to:"/dashboard/evidence",roles:["user"]},{id:"all-reports",label:"Kelola Laporan",icon:"mdi:file-document-multiple",to:"/dashboard/all-reports",roles:["admin"]},{id:"manage-evidence",label:"Kelola Evidence",icon:"mdi:shield-check",to:"/dashboard/manage-evidence",roles:["admin"]},{id:"manage-users",label:"Kelola User",icon:"mdi:account-multiple",to:"/dashboard/manage-users",roles:["admin"]},{id:"profile",label:"Profil",icon:"mdi:account",to:"/dashboard/profile",roles:["user","admin"]}]}},computed:{currentUser(){return this.$store.getters.user||{name:"John Doe",email:"john.doe@example.com",role:"admin"}},userInitials(){return this.currentUser.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase()},filteredMenuItems(){return this.menuItems.filter(e=>!!e.roles.includes(this.currentUser.role)&&(!e.children||(e.children=e.children.filter(e=>e.roles.includes(this.currentUser.role)),e.children.length>0)))},currentPage(){const e=this.$route.path,t=this.findMenuItemByRoute(e);return t?t.label:"Dashboard"}},methods:{...(0,o.i0)(["fetchUserProfile"]),maskEmail(e){if(!e||"string"!==typeof e)return"";const[t,s]=e.split("@");if(!t||!s)return e;let a;return a=t.length<=2?"*".repeat(t.length):(t.length,t[0]+"*".repeat(t.length-2)+t[t.length-1]),`${a}@${s}`},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},closeSidebar(){this.sidebarOpen=!1},toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen,this.notificationsOpen=!1},toggleNotifications(){this.notificationsOpen=!this.notificationsOpen,this.userMenuOpen=!1},toggleMenuGroup(e){const t=this.expandedGroups.indexOf(e);t>-1?this.expandedGroups.splice(t,1):this.expandedGroups.push(e)},isActiveRoute(e){return this.$route.path===e},hasActiveChild(e){return!!e.children&&e.children.some(e=>this.isActiveRoute(e.to))},findMenuItemByRoute(e){for(const t of this.menuItems){if(t.to===e)return t;if(t.children){const s=t.children.find(t=>t.to===e);if(s)return s}}return null},logout(){this.$store.dispatch("logout").then(()=>{document.body.classList.remove("dashboard-page"),this.$router.push("/"),this.$message.success("Berhasil logout")})},goToHome(){document.body.classList.remove("dashboard-page"),this.$router.push("/")},navigateToProfile(){this.$router.push("/dashboard/profile"),this.userMenuOpen=!1},navigateToSettings(){this.$router.push("/dashboard/settings"),this.userMenuOpen=!1},async loadUserProfile(){try{console.log("Loading user profile..."),await this.fetchUserProfile(),console.log("User profile loaded successfully")}catch(e){console.error("Failed to load user profile:",e)}}},mounted(){document.body.classList.add("dashboard-page"),this.loadUserProfile(),document.addEventListener("click",e=>{e.target.closest(".relative")||(this.userMenuOpen=!1,this.notificationsOpen=!1)}),this.$router.afterEach(()=>{this.sidebarOpen=!1}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&(this.sidebarOpen=!1)})},beforeDestroy(){document.body.classList.remove("dashboard-page")}},l=n,d=s(1656),c=(0,d.A)(l,a,r,!1,null,"0feace02",null),u=c.exports}}]);
//# sourceMappingURL=dashboard.fdedf159.js.map