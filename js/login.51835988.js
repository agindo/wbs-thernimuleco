"use strict";(self["webpackChunkwbs_2025"]=self["webpackChunkwbs_2025"]||[]).push([[966],{5542:function(s,a,e){e.r(a),e.d(a,{default:function(){return g}});var t=function(){var s=this,a=s._self._c;return a("div",{staticClass:"login-page"},[s._m(0),a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-card"},[a("div",{staticClass:"login-header"},[a("div",{staticClass:"logo-container"},[a("Icon",{staticClass:"logo-icon",attrs:{icon:"mdi:shield-account"}})],1),a("h1",{staticClass:"login-title"},[s._v("Masuk ke WBS")]),s._m(1)]),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:s.loginForm,rules:s.loginRules},nativeOn:{submit:function(a){return a.preventDefault(),s.handleLogin.apply(null,arguments)}}},[a("el-form-item",{staticClass:"form-item",attrs:{prop:"email"}},[a("el-input",{staticClass:"form-input",attrs:{placeholder:"Email atau Username","prefix-icon":"el-icon-user",size:"large"},on:{input:s.formatEmailOrUsername},model:{value:s.loginForm.email,callback:function(a){s.$set(s.loginForm,"email",a)},expression:"loginForm.email"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{prop:"password"}},[a("el-input",{staticClass:"form-input",attrs:{type:"password",placeholder:"Password","prefix-icon":"el-icon-lock",size:"large","show-password":""},model:{value:s.loginForm.password,callback:function(a){s.$set(s.loginForm,"password",a)},expression:"loginForm.password"}})],1),a("div",{staticClass:"form-options"},[a("el-checkbox",{staticClass:"remember-me",model:{value:s.loginForm.remember,callback:function(a){s.$set(s.loginForm,"remember",a)},expression:"loginForm.remember"}},[s._v(" Ingat saya ")]),a("el-link",{staticClass:"forgot-password",attrs:{type:"primary"}},[s._v(" Lupa password? ")])],1),a("el-form-item",{staticClass:"submit-item"},[a("el-button",{staticClass:"login-button",attrs:{type:"primary",size:"large",loading:s.loading,"native-type":"submit"}},[a("div",{staticClass:"button-content"},[s.loading?s._e():a("Icon",{staticClass:"button-icon",attrs:{icon:"mdi:login"}}),a("span",[s._v(s._s(s.loading?"Memproses...":"Masuk"))])],1)])],1)],1),a("div",{staticClass:"login-footer"},[a("p",{staticClass:"signup-text"},[s._v(" Belum punya akun? "),a("el-link",{staticClass:"signup-link",attrs:{type:"primary"},on:{click:s.goToRegister}},[s._v(" Daftar sekarang ")])],1)])],1)])])},i=[function(){var s=this,a=s._self._c;return a("div",{staticClass:"login-background"},[a("div",{staticClass:"bg-gradient"}),a("div",{staticClass:"bg-pattern"})])},function(){var s=this,a=s._self._c;return a("p",{staticClass:"login-subtitle"},[s._v(" Masuk dengan email atau username untuk mengakses sistem pelaporan"),a("br"),a("small",{staticStyle:{color:"#9ca3af","font-size":"0.875rem"}},[s._v(" Contoh: user@email.com atau username123 ")])])}],r=(e(4114),e(8298)),o=e(1910),n={name:"LoginView",components:{Icon:r.In},computed:{...(0,o.aH)(["loading","message","status"]),...(0,o.L8)(["isLoggedIn"])},watch:{message(s){s&&(this.$message.error(s),this.$store.commit("set_message",null))},isLoggedIn(s){s&&this.$nextTick(()=>{this.$router.push({name:"dashboard-home"}).catch(s=>{console.log("Navigation handled by guard:",s.message)})})}},data(){return{loginForm:{email:"",password:"",remember:!1},loginRules:{email:[{required:!0,message:"Email atau Username wajib diisi",trigger:"blur"},{validator:(s,a,e)=>{if(!a)return void e();const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,i=/^[a-zA-Z0-9_-]{3,20}$/;t.test(a)||i.test(a)?e():e(new Error("Masukkan email yang valid atau username (3-20 karakter, huruf, angka, _, -)"))},trigger:["blur","change"]}],password:[{required:!0,message:"Password wajib diisi",trigger:"blur"},{min:6,message:"Password minimal 6 karakter",trigger:"blur"}]}}},methods:{...(0,o.i0)(["login"]),formatEmailOrUsername(s){let a=s.trim();a.includes("@")||(a=a.toLowerCase(),a=a.replace(/[^a-zA-Z0-9_-]/g,"")),this.loginForm.email=a},async handleLogin(){this.$refs.loginForm.validate(async s=>{if(s)try{const s={usernameOrEmail:this.loginForm.email,password:this.loginForm.password},a=await this.login(s);a.data&&(a.data.user&&localStorage.setItem("user_data",JSON.stringify(a.data.user)),this.$message.success("Login berhasil!"))}catch(a){console.error("Login error:",a)}else this.$message.error("Silakan periksa form input Anda")})},async testLogin(){try{const s={usernameOrEmail:"6mdiames",password:"d&6yecU3MQ3J"},a=await this.login(s);a.data&&(a.data.user&&localStorage.setItem("user_data",JSON.stringify(a.data.user)),this.$message.success("Test login berhasil!"))}catch(s){console.error("Test login error:",s)}},goToRegister(){this.$router.push("/register")}}},l=n,m=e(1656),c=(0,m.A)(l,t,i,!1,null,"5c27bbab",null),g=c.exports}}]);
//# sourceMappingURL=login.51835988.js.map